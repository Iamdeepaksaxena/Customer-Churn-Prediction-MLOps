schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data_ingestion.py
    deps:
    - path: src/data_ingestion.py
      hash: md5
      md5: b6c99b39cbfaf57dd722b611b1352d21
      size: 3718
    params:
      params.yaml:
        data_ingestion.test_size: 0.25
    outs:
    - path: data/raw
      hash: md5
      md5: 499c9523455a2891e81dbb51b911d6c7.dir
      size: 892139
      nfiles: 2
  data_preprocessing:
    cmd: python src/data_preprocessing.py
    deps:
    - path: data/raw
      hash: md5
      md5: 499c9523455a2891e81dbb51b911d6c7.dir
      size: 892139
      nfiles: 2
    - path: src/data_preprocessing.py
      hash: md5
      md5: 40697582c4ded0d99f69548fe6c7bc26
      size: 4372
    outs:
    - path: data/interim
      hash: md5
      md5: fec1b5f866b359462f95ee793562076a.dir
      size: 1611558
      nfiles: 2
    - path: models/encoder.pkl
      hash: md5
      md5: 7c4c75d3c3d2d8913ebbe3946892ff3b
      size: 1768
  feature_engineering:
    cmd: python src/feature_engineering.py
    deps:
    - path: data/interim
      hash: md5
      md5: fec1b5f866b359462f95ee793562076a.dir
      size: 1611558
      nfiles: 2
    - path: src/feature_engineering.py
      hash: md5
      md5: cacc8328d4ea0f81a8eedbdaaaf86897
      size: 3781
    outs:
    - path: data/processed
      hash: md5
      md5: 9504073b622f9ef73dcae5f764867394.dir
      size: 1976571
      nfiles: 2
    - path: models/scaler.pkl
      hash: md5
      md5: 45e879ffe8602f4bc18d684f51222f8a
      size: 650
  model_building:
    cmd: python src/model_building.py
    deps:
    - path: data/processed
      hash: md5
      md5: 9504073b622f9ef73dcae5f764867394.dir
      size: 1976571
      nfiles: 2
    - path: src/model_building.py
      hash: md5
      md5: d92dd87d9aeeb27672022d500ebf92fd
      size: 6777
    params:
      params.yaml:
        models.decision_tree:
          criterion:
          - gini
          - entropy
          min_samples_split:
          - 2
          - 4
          - 6
          - 8
          min_samples_leaf:
          - 1
          - 2
          - 3
          - 4
          - 5
          - 6
          - 7
          - 8
        models.knn:
          n_neighbors:
          - 3
          - 5
          - 7
          - 9
          - 11
          - 15
          p:
          - 1
          - 2
        models.logistic_regression: {}
        models.random_forest:
          n_estimators:
          - 100
          - 200
          criterion:
          - gini
          - entropy
          min_samples_split:
          - 2
          - 4
          - 6
          - 8
          min_samples_leaf:
          - 1
          - 2
          - 3
          - 4
          - 5
          - 6
          - 7
          - 8
        models.svc:
          kernel:
          - rbf
          - linear
          - poly
          - sigmoid
    outs:
    - path: models/decision_tree_best_model.pkl
      hash: md5
      md5: a4b476b8aa44d40a68b503b090b1100b
      size: 89634
    - path: models/knn_best_model.pkl
      hash: md5
      md5: 41c142745216a2f72adf1bbbdd735139
      size: 2048284
    - path: models/logistic_regression_best_model.pkl
      hash: md5
      md5: 9dc9bb85e219032c1a8dcba9fd46bd41
      size: 1058
    - path: models/random_forest_best_model.pkl
      hash: md5
      md5: 87e138e6f71ebeca02a43340d7e0810d
      size: 19370221
    - path: models/svc_best_model.pkl
      hash: md5
      md5: 4d15d779165f155d3ba62a1ee09e27b8
      size: 992497
  model_evaluation:
    cmd: python src/model_evaluation.py
    deps:
    - path: models/
      hash: md5
      md5: a8a389d2e2354b7cefaaed0b3d20e347.dir
      size: 22504112
      nfiles: 7
    - path: src/model_evaluation.py
      hash: md5
      md5: 2e04fea4c758379816e8149228f51f71
      size: 5575
    params:
      params.yaml:
        evaluation.metrics_output: reports/metrics.json
        evaluation.mlflow_experiment: Customer_Churn_Model_Evaluation_v2
    outs:
    - path: reports/metrics.json
      hash: md5
      md5: 28b169fa143cbc626b8ddf4d02617afd
      size: 932
